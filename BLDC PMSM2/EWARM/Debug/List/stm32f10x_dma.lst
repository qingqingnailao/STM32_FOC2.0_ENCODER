###############################################################################
#                                                                             #
# IAR ANSI C/C++ Compiler V6.40.1.53790/W32 for ARM     24/Feb/2014  19:26:44 #
# Copyright 1999-2012 IAR Systems AB.                                         #
#                                                                             #
#    Cpu mode     =  thumb                                                    #
#    Endian       =  little                                                   #
#    Source file  =  D:\stm32\STM32F10XFWLIB\src\stm32f10x_dma.c              #
#    Command line =  D:\stm32\STM32F10XFWLIB\src\stm32f10x_dma.c -D           #
#                    VECT_TAB_FLASH -lCN "D:\stm32\BLDC                       #
#                    PMSM2\EWARM\Debug\List\" --diag_error Pe068,Pe069 -o     #
#                    "D:\stm32\BLDC PMSM2\EWARM\Debug\Obj\" --debug           #
#                    --endian=little --cpu=Cortex-M3 --fpu=None               #
#                    --dlib_config "C:\Program Files\IAR Systems\Embedded     #
#                    Workbench 6.4\arm\INC\c\DLib_Config_Normal.h" -I         #
#                    "D:\stm32\BLDC PMSM2\EWARM\..\" -I "D:\stm32\BLDC        #
#                    PMSM2\EWARM\..\..\STM32F10XFWLIB\inc\" -I                #
#                    "D:\stm32\BLDC PMSM2\EWARM\..\inc\" -Oh                  #
#                    --use_c++_inline --require_prototypes                    #
#    List file    =  D:\stm32\BLDC PMSM2\EWARM\Debug\List\stm32f10x_dma.lst   #
#    Object file  =  D:\stm32\BLDC PMSM2\EWARM\Debug\Obj\stm32f10x_dma.o      #
#                                                                             #
#                                                                             #
###############################################################################

D:\stm32\STM32F10XFWLIB\src\stm32f10x_dma.c
      1          /******************** (C) COPYRIGHT 2008 STMicroelectronics ********************
      2          * File Name          : stm32f10x_dma.c
      3          * Author             : MCD Application Team
      4          * Version            : V2.0
      5          * Date               : 05/23/2008
      6          * Description        : This file provides all the DMA firmware functions.
      7          ********************************************************************************
      8          * THE PRESENT FIRMWARE WHICH IS FOR GUIDANCE ONLY AIMS AT PROVIDING CUSTOMERS
      9          * WITH CODING INFORMATION REGARDING THEIR PRODUCTS IN ORDER FOR THEM TO SAVE TIME.
     10          * AS A RESULT, STMICROELECTRONICS SHALL NOT BE HELD LIABLE FOR ANY DIRECT,
     11          * INDIRECT OR CONSEQUENTIAL DAMAGES WITH RESPECT TO ANY CLAIMS ARISING FROM THE
     12          * CONTENT OF SUCH SOFTWARE AND/OR THE USE MADE BY CUSTOMERS OF THE CODING
     13          * INFORMATION CONTAINED HEREIN IN CONNECTION WITH THEIR PRODUCTS.
     14          * FOR MORE INFORMATION PLEASE CAREFULLY READ THE LICENSE AGREEMENT FILE LOCATED 
     15          * IN THE ROOT DIRECTORY OF THIS FIRMWARE PACKAGE.
     16          *******************************************************************************/
     17          
     18          /* Includes ------------------------------------------------------------------*/
     19          #include "stm32f10x_dma.h"
     20          #include "stm32f10x_rcc.h"
     21          
     22          /* Private typedef -----------------------------------------------------------*/
     23          /* Private define ------------------------------------------------------------*/
     24          /* DMA ENABLE mask */
     25          #define CCR_ENABLE_Set          ((u32)0x00000001)
     26          #define CCR_ENABLE_Reset        ((u32)0xFFFFFFFE)
     27          
     28          /* DMA1 Channelx interrupt pending bit masks */
     29          #define DMA1_Channel1_IT_Mask    ((u32)0x0000000F)
     30          #define DMA1_Channel2_IT_Mask    ((u32)0x000000F0)
     31          #define DMA1_Channel3_IT_Mask    ((u32)0x00000F00)
     32          #define DMA1_Channel4_IT_Mask    ((u32)0x0000F000)
     33          #define DMA1_Channel5_IT_Mask    ((u32)0x000F0000)
     34          #define DMA1_Channel6_IT_Mask    ((u32)0x00F00000)
     35          #define DMA1_Channel7_IT_Mask    ((u32)0x0F000000)
     36          
     37          /* DMA2 Channelx interrupt pending bit masks */
     38          #define DMA2_Channel1_IT_Mask    ((u32)0x0000000F)
     39          #define DMA2_Channel2_IT_Mask    ((u32)0x000000F0)
     40          #define DMA2_Channel3_IT_Mask    ((u32)0x00000F00)
     41          #define DMA2_Channel4_IT_Mask    ((u32)0x0000F000)
     42          #define DMA2_Channel5_IT_Mask    ((u32)0x000F0000)
     43          
     44          /* DMA2 FLAG mask */
     45          #define FLAG_Mask                ((u32)0x10000000)
     46          
     47          /* DMA registers Masks */
     48          #define CCR_CLEAR_Mask           ((u32)0xFFFF800F)
     49          
     50          /* Private macro -------------------------------------------------------------*/
     51          /* Private variables ---------------------------------------------------------*/
     52          /* Private function prototypes -----------------------------------------------*/
     53          /* Private functions ---------------------------------------------------------*/
     54          
     55          /*******************************************************************************
     56          * Function Name  : DMA_DeInit
     57          * Description    : Deinitializes the DMAy Channelx registers to their default reset
     58          *                  values.
     59          * Input          : - DMAy_Channelx: where y can be 1 or 2 to select the DMA and
     60          *                    x can be 1 to 7 for DMA1 and 1 to 5 for DMA2 to select the 
     61          *                    DMA Channel.
     62          * Output         : None
     63          * Return         : None
     64          *******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
     65          void DMA_DeInit(DMA_Channel_TypeDef* DMAy_Channelx)
     66          {
     67            /* Check the parameters */
     68            assert_param(IS_DMA_ALL_PERIPH(DMAy_Channelx));
     69          
     70            /* Disable the selected DMAy Channelx */
     71            DMAy_Channelx->CCR &= CCR_ENABLE_Reset;
   \                     DMA_DeInit:
   \   00000000   0x6801             LDR      R1,[R0, #+0]
   \   00000002   0x0849             LSRS     R1,R1,#+1
   \   00000004   0x0049             LSLS     R1,R1,#+1
   \   00000006   0x6001             STR      R1,[R0, #+0]
     72          
     73            /* Reset DMAy Channelx control register */
     74            DMAy_Channelx->CCR  = 0;
   \   00000008   0x2100             MOVS     R1,#+0
   \   0000000A   0x6001             STR      R1,[R0, #+0]
     75            
     76            /* Reset DMAy Channelx remaining bytes register */
     77            DMAy_Channelx->CNDTR = 0;
   \   0000000C   0x6041             STR      R1,[R0, #+4]
     78            
     79            /* Reset DMAy Channelx peripheral address register */
     80            DMAy_Channelx->CPAR  = 0;
   \   0000000E   0x6081             STR      R1,[R0, #+8]
     81            
     82            /* Reset DMAy Channelx memory address register */
     83            DMAy_Channelx->CMAR = 0;
   \   00000010   0x60C1             STR      R1,[R0, #+12]
     84          
     85            switch (*(u32*)&DMAy_Channelx)
   \   00000012   0x....             LDR.N    R1,??DataTable4  ;; 0x40020008
   \   00000014   0x1A40             SUBS     R0,R0,R1
   \   00000016   0xD018             BEQ.N    ??DMA_DeInit_0
   \   00000018   0x3814             SUBS     R0,R0,#+20
   \   0000001A   0xD01B             BEQ.N    ??DMA_DeInit_1
   \   0000001C   0x3814             SUBS     R0,R0,#+20
   \   0000001E   0xD01E             BEQ.N    ??DMA_DeInit_2
   \   00000020   0x3814             SUBS     R0,R0,#+20
   \   00000022   0xD021             BEQ.N    ??DMA_DeInit_3
   \   00000024   0x3814             SUBS     R0,R0,#+20
   \   00000026   0xD024             BEQ.N    ??DMA_DeInit_4
   \   00000028   0x3814             SUBS     R0,R0,#+20
   \   0000002A   0xD024             BEQ.N    ??DMA_DeInit_5
   \   0000002C   0x3814             SUBS     R0,R0,#+20
   \   0000002E   0xD027             BEQ.N    ??DMA_DeInit_6
   \   00000030   0xF44F 0x7162      MOV      R1,#+904
   \   00000034   0x1A40             SUBS     R0,R0,R1
   \   00000036   0xD028             BEQ.N    ??DMA_DeInit_7
   \   00000038   0x3814             SUBS     R0,R0,#+20
   \   0000003A   0xD02B             BEQ.N    ??DMA_DeInit_8
   \   0000003C   0x3814             SUBS     R0,R0,#+20
   \   0000003E   0xD02E             BEQ.N    ??DMA_DeInit_9
   \   00000040   0x3814             SUBS     R0,R0,#+20
   \   00000042   0xD031             BEQ.N    ??DMA_DeInit_10
   \   00000044   0x3814             SUBS     R0,R0,#+20
   \   00000046   0xD034             BEQ.N    ??DMA_DeInit_11
   \   00000048   0x4770             BX       LR
     86            {
     87              case DMA1_Channel1_BASE:
     88                /* Reset interrupt pending bits for DMA1 Channel1 */
     89                DMA1->IFCR |= DMA1_Channel1_IT_Mask;
   \                     ??DMA_DeInit_0:
   \   0000004A   0x....             LDR.N    R0,??DataTable4_1  ;; 0x40020004
   \   0000004C   0x6801             LDR      R1,[R0, #+0]
   \   0000004E   0xF041 0x010F      ORR      R1,R1,#0xF
   \   00000052   0xE032             B.N      ??DMA_DeInit_12
     90                break;
     91          
     92              case DMA1_Channel2_BASE:
     93                /* Reset interrupt pending bits for DMA1 Channel2 */
     94                DMA1->IFCR |= DMA1_Channel2_IT_Mask;
   \                     ??DMA_DeInit_1:
   \   00000054   0x....             LDR.N    R0,??DataTable4_1  ;; 0x40020004
   \   00000056   0x6801             LDR      R1,[R0, #+0]
   \   00000058   0xF041 0x01F0      ORR      R1,R1,#0xF0
   \   0000005C   0xE02D             B.N      ??DMA_DeInit_12
     95                break;
     96          
     97              case DMA1_Channel3_BASE:
     98                /* Reset interrupt pending bits for DMA1 Channel3 */
     99                DMA1->IFCR |= DMA1_Channel3_IT_Mask;
   \                     ??DMA_DeInit_2:
   \   0000005E   0x....             LDR.N    R0,??DataTable4_1  ;; 0x40020004
   \   00000060   0x6801             LDR      R1,[R0, #+0]
   \   00000062   0xF441 0x6170      ORR      R1,R1,#0xF00
   \   00000066   0xE028             B.N      ??DMA_DeInit_12
    100                break;
    101          
    102              case DMA1_Channel4_BASE:
    103                /* Reset interrupt pending bits for DMA1 Channel4 */
    104                DMA1->IFCR |= DMA1_Channel4_IT_Mask;
   \                     ??DMA_DeInit_3:
   \   00000068   0x....             LDR.N    R0,??DataTable4_1  ;; 0x40020004
   \   0000006A   0x6801             LDR      R1,[R0, #+0]
   \   0000006C   0xF441 0x4170      ORR      R1,R1,#0xF000
   \   00000070   0xE023             B.N      ??DMA_DeInit_12
    105                break;
    106          
    107              case DMA1_Channel5_BASE:
    108                /* Reset interrupt pending bits for DMA1 Channel5 */
    109                DMA1->IFCR |= DMA1_Channel5_IT_Mask;
   \                     ??DMA_DeInit_4:
   \   00000072   0x....             LDR.N    R0,??DataTable4_1  ;; 0x40020004
   \   00000074   0xE01E             B.N      ??DMA_DeInit_13
    110                break;
    111          
    112              case DMA1_Channel6_BASE:
    113                /* Reset interrupt pending bits for DMA1 Channel6 */
    114                DMA1->IFCR |= DMA1_Channel6_IT_Mask;
   \                     ??DMA_DeInit_5:
   \   00000076   0x....             LDR.N    R0,??DataTable4_1  ;; 0x40020004
   \   00000078   0x6801             LDR      R1,[R0, #+0]
   \   0000007A   0xF441 0x0170      ORR      R1,R1,#0xF00000
   \   0000007E   0xE01C             B.N      ??DMA_DeInit_12
    115                break;
    116          
    117              case DMA1_Channel7_BASE:
    118                /* Reset interrupt pending bits for DMA1 Channel7 */
    119                DMA1->IFCR |= DMA1_Channel7_IT_Mask;
   \                     ??DMA_DeInit_6:
   \   00000080   0x....             LDR.N    R0,??DataTable4_1  ;; 0x40020004
   \   00000082   0x6801             LDR      R1,[R0, #+0]
   \   00000084   0xF041 0x6170      ORR      R1,R1,#0xF000000
   \   00000088   0xE017             B.N      ??DMA_DeInit_12
    120                break;
    121          
    122              case DMA2_Channel1_BASE:
    123                /* Reset interrupt pending bits for DMA2 Channel1 */
    124                DMA2->IFCR |= DMA2_Channel1_IT_Mask;
   \                     ??DMA_DeInit_7:
   \   0000008A   0x....             LDR.N    R0,??DataTable4_2  ;; 0x40020404
   \   0000008C   0x6801             LDR      R1,[R0, #+0]
   \   0000008E   0xF041 0x010F      ORR      R1,R1,#0xF
   \   00000092   0xE012             B.N      ??DMA_DeInit_12
    125                break;
    126          
    127              case DMA2_Channel2_BASE:
    128                /* Reset interrupt pending bits for DMA2 Channel2 */
    129                DMA2->IFCR |= DMA2_Channel2_IT_Mask;
   \                     ??DMA_DeInit_8:
   \   00000094   0x....             LDR.N    R0,??DataTable4_2  ;; 0x40020404
   \   00000096   0x6801             LDR      R1,[R0, #+0]
   \   00000098   0xF041 0x01F0      ORR      R1,R1,#0xF0
   \   0000009C   0xE00D             B.N      ??DMA_DeInit_12
    130                break;
    131          
    132              case DMA2_Channel3_BASE:
    133                /* Reset interrupt pending bits for DMA2 Channel3 */
    134                DMA2->IFCR |= DMA2_Channel3_IT_Mask;
   \                     ??DMA_DeInit_9:
   \   0000009E   0x....             LDR.N    R0,??DataTable4_2  ;; 0x40020404
   \   000000A0   0x6801             LDR      R1,[R0, #+0]
   \   000000A2   0xF441 0x6170      ORR      R1,R1,#0xF00
   \   000000A6   0xE008             B.N      ??DMA_DeInit_12
    135                break;
    136          
    137              case DMA2_Channel4_BASE:
    138                /* Reset interrupt pending bits for DMA2 Channel4 */
    139                DMA2->IFCR |= DMA2_Channel4_IT_Mask;
   \                     ??DMA_DeInit_10:
   \   000000A8   0x....             LDR.N    R0,??DataTable4_2  ;; 0x40020404
   \   000000AA   0x6801             LDR      R1,[R0, #+0]
   \   000000AC   0xF441 0x4170      ORR      R1,R1,#0xF000
   \   000000B0   0xE003             B.N      ??DMA_DeInit_12
    140                break;
    141          
    142              case DMA2_Channel5_BASE:
    143                /* Reset interrupt pending bits for DMA2 Channel5 */
    144                DMA2->IFCR |= DMA2_Channel5_IT_Mask;
   \                     ??DMA_DeInit_11:
   \   000000B2   0x....             LDR.N    R0,??DataTable4_2  ;; 0x40020404
   \                     ??DMA_DeInit_13:
   \   000000B4   0x6801             LDR      R1,[R0, #+0]
   \   000000B6   0xF441 0x2170      ORR      R1,R1,#0xF0000
   \                     ??DMA_DeInit_12:
   \   000000BA   0x6001             STR      R1,[R0, #+0]
    145                break;
    146                
    147              default:
    148                break;
    149            }
    150          }
   \   000000BC   0x4770             BX       LR               ;; return
    151          
    152          /*******************************************************************************
    153          * Function Name  : DMA_Init
    154          * Description    : Initializes the DMAy Channelx according to the specified
    155          *                  parameters in the DMA_InitStruct.
    156          * Input          : - DMAy_Channelx: where y can be 1 or 2 to select the DMA and 
    157          *                    x can be 1 to 7 for DMA1 and 1 to 5 for DMA2 to select the 
    158          *                    DMA Channel.
    159          *                  - DMA_InitStruct: pointer to a DMA_InitTypeDef structure that
    160          *                    contains the configuration information for the specified
    161          *                    DMA Channel.
    162          * Output         : None
    163          * Return         : None
    164          ******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    165          void DMA_Init(DMA_Channel_TypeDef* DMAy_Channelx, DMA_InitTypeDef* DMA_InitStruct)
    166          {
    167            u32 tmpreg = 0;
    168          
    169            /* Check the parameters */
    170            assert_param(IS_DMA_ALL_PERIPH(DMAy_Channelx));
    171            assert_param(IS_DMA_DIR(DMA_InitStruct->DMA_DIR));
    172            assert_param(IS_DMA_BUFFER_SIZE(DMA_InitStruct->DMA_BufferSize));
    173            assert_param(IS_DMA_PERIPHERAL_INC_STATE(DMA_InitStruct->DMA_PeripheralInc));
    174            assert_param(IS_DMA_MEMORY_INC_STATE(DMA_InitStruct->DMA_MemoryInc));   
    175            assert_param(IS_DMA_PERIPHERAL_DATA_SIZE(DMA_InitStruct->DMA_PeripheralDataSize));
    176            assert_param(IS_DMA_MEMORY_DATA_SIZE(DMA_InitStruct->DMA_MemoryDataSize));
    177            assert_param(IS_DMA_MODE(DMA_InitStruct->DMA_Mode));
    178            assert_param(IS_DMA_PRIORITY(DMA_InitStruct->DMA_Priority));
    179            assert_param(IS_DMA_M2M_STATE(DMA_InitStruct->DMA_M2M));
    180          
    181          /*--------------------------- DMAy Channelx CCR Configuration -----------------*/
    182            /* Get the DMAy_Channelx CCR value */
    183            tmpreg = DMAy_Channelx->CCR;
    184            /* Clear MEM2MEM, PL, MSIZE, PSIZE, MINC, PINC, CIRC and DIR bits */
    185            tmpreg &= CCR_CLEAR_Mask;
    186            /* Configure DMAy Channelx: data transfer, data size, priority level and mode */
    187            /* Set DIR bit according to DMA_DIR value */
    188            /* Set CIRC bit according to DMA_Mode value */
    189            /* Set PINC bit according to DMA_PeripheralInc value */
    190            /* Set MINC bit according to DMA_MemoryInc value */
    191            /* Set PSIZE bits according to DMA_PeripheralDataSize value */
    192            /* Set MSIZE bits according to DMA_MemoryDataSize value */
    193            /* Set PL bits according to DMA_Priority value */
    194            /* Set the MEM2MEM bit according to DMA_M2M value */
    195            tmpreg |= DMA_InitStruct->DMA_DIR | DMA_InitStruct->DMA_Mode |
    196                      DMA_InitStruct->DMA_PeripheralInc | DMA_InitStruct->DMA_MemoryInc |
    197                      DMA_InitStruct->DMA_PeripheralDataSize | DMA_InitStruct->DMA_MemoryDataSize |
    198                      DMA_InitStruct->DMA_Priority | DMA_InitStruct->DMA_M2M;
    199            /* Write to DMAy Channelx CCR */
    200            DMAy_Channelx->CCR = tmpreg;
   \                     DMA_Init:
   \   00000000   0x6802             LDR      R2,[R0, #+0]
   \   00000002   0xF36F 0x120E      BFC      R2,#+4,#+11
   \   00000006   0x688B             LDR      R3,[R1, #+8]
   \   00000008   0x431A             ORRS     R2,R3,R2
   \   0000000A   0x6A0B             LDR      R3,[R1, #+32]
   \   0000000C   0x431A             ORRS     R2,R3,R2
   \   0000000E   0x690B             LDR      R3,[R1, #+16]
   \   00000010   0x431A             ORRS     R2,R3,R2
   \   00000012   0x694B             LDR      R3,[R1, #+20]
   \   00000014   0x431A             ORRS     R2,R3,R2
   \   00000016   0x698B             LDR      R3,[R1, #+24]
   \   00000018   0x431A             ORRS     R2,R3,R2
   \   0000001A   0x69CB             LDR      R3,[R1, #+28]
   \   0000001C   0x431A             ORRS     R2,R3,R2
   \   0000001E   0x6A4B             LDR      R3,[R1, #+36]
   \   00000020   0x431A             ORRS     R2,R3,R2
   \   00000022   0x6A8B             LDR      R3,[R1, #+40]
   \   00000024   0x431A             ORRS     R2,R3,R2
   \   00000026   0x6002             STR      R2,[R0, #+0]
    201          
    202          /*--------------------------- DMAy Channelx CNDTR Configuration ---------------*/
    203            /* Write to DMAy Channelx CNDTR */
    204            DMAy_Channelx->CNDTR = DMA_InitStruct->DMA_BufferSize;
   \   00000028   0x68CA             LDR      R2,[R1, #+12]
   \   0000002A   0x6042             STR      R2,[R0, #+4]
    205          
    206          /*--------------------------- DMAy Channelx CPAR Configuration ----------------*/
    207            /* Write to DMAy Channelx CPAR */
    208            DMAy_Channelx->CPAR = DMA_InitStruct->DMA_PeripheralBaseAddr;
   \   0000002C   0x680A             LDR      R2,[R1, #+0]
   \   0000002E   0x6082             STR      R2,[R0, #+8]
    209          
    210          /*--------------------------- DMAy Channelx CMAR Configuration ----------------*/
    211            /* Write to DMAy Channelx CMAR */
    212            DMAy_Channelx->CMAR = DMA_InitStruct->DMA_MemoryBaseAddr;
   \   00000030   0x6849             LDR      R1,[R1, #+4]
   \   00000032   0x60C1             STR      R1,[R0, #+12]
    213          }
   \   00000034   0x4770             BX       LR               ;; return
    214          
    215          /*******************************************************************************
    216          * Function Name  : DMA_StructInit
    217          * Description    : Fills each DMA_InitStruct member with its default value.
    218          * Input          : - DMA_InitStruct : pointer to a DMA_InitTypeDef structure
    219          *                    which will be initialized.
    220          * Output         : None
    221          * Return         : None
    222          *******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    223          void DMA_StructInit(DMA_InitTypeDef* DMA_InitStruct)
    224          {
    225          /*-------------- Reset DMA init structure parameters values ------------------*/
    226            /* Initialize the DMA_PeripheralBaseAddr member */
    227            DMA_InitStruct->DMA_PeripheralBaseAddr = 0;
   \                     DMA_StructInit:
   \   00000000   0x2100             MOVS     R1,#+0
   \   00000002   0x6001             STR      R1,[R0, #+0]
    228          
    229            /* Initialize the DMA_MemoryBaseAddr member */
    230            DMA_InitStruct->DMA_MemoryBaseAddr = 0;
   \   00000004   0x6041             STR      R1,[R0, #+4]
    231          
    232            /* Initialize the DMA_DIR member */
    233            DMA_InitStruct->DMA_DIR = DMA_DIR_PeripheralSRC;
   \   00000006   0x6081             STR      R1,[R0, #+8]
    234          
    235            /* Initialize the DMA_BufferSize member */
    236            DMA_InitStruct->DMA_BufferSize = 0;
   \   00000008   0x60C1             STR      R1,[R0, #+12]
    237          
    238            /* Initialize the DMA_PeripheralInc member */
    239            DMA_InitStruct->DMA_PeripheralInc = DMA_PeripheralInc_Disable;
   \   0000000A   0x6101             STR      R1,[R0, #+16]
    240          
    241            /* Initialize the DMA_MemoryInc member */
    242            DMA_InitStruct->DMA_MemoryInc = DMA_MemoryInc_Disable;
   \   0000000C   0x6141             STR      R1,[R0, #+20]
    243          
    244            /* Initialize the DMA_PeripheralDataSize member */
    245            DMA_InitStruct->DMA_PeripheralDataSize = DMA_PeripheralDataSize_Byte;
   \   0000000E   0x6181             STR      R1,[R0, #+24]
    246          
    247            /* Initialize the DMA_MemoryDataSize member */
    248            DMA_InitStruct->DMA_MemoryDataSize = DMA_MemoryDataSize_Byte;
   \   00000010   0x61C1             STR      R1,[R0, #+28]
    249          
    250            /* Initialize the DMA_Mode member */
    251            DMA_InitStruct->DMA_Mode = DMA_Mode_Normal;
   \   00000012   0x6201             STR      R1,[R0, #+32]
    252          
    253            /* Initialize the DMA_Priority member */
    254            DMA_InitStruct->DMA_Priority = DMA_Priority_Low;
   \   00000014   0x6241             STR      R1,[R0, #+36]
    255          
    256            /* Initialize the DMA_M2M member */
    257            DMA_InitStruct->DMA_M2M = DMA_M2M_Disable;
   \   00000016   0x6281             STR      R1,[R0, #+40]
    258          }
   \   00000018   0x4770             BX       LR               ;; return
    259          
    260          /*******************************************************************************
    261          * Function Name  : DMA_Cmd
    262          * Description    : Enables or disables the specified DMAy Channelx.
    263          * Input          : - DMAy_Channelx: where y can be 1 or 2 to select the DMA and 
    264          *                    x can be 1 to 7 for DMA1 and 1 to 5 for DMA2 to select the 
    265          *                    DMA Channel.
    266          *                  - NewState: new state of the DMAy Channelx. 
    267          *                    This parameter can be: ENABLE or DISABLE.
    268          * Output         : None
    269          * Return         : None
    270          *******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    271          void DMA_Cmd(DMA_Channel_TypeDef* DMAy_Channelx, FunctionalState NewState)
    272          {
    273            /* Check the parameters */
    274            assert_param(IS_DMA_ALL_PERIPH(DMAy_Channelx));
    275            assert_param(IS_FUNCTIONAL_STATE(NewState));
    276          
    277            if (NewState != DISABLE)
   \                     DMA_Cmd:
   \   00000000   0x2900             CMP      R1,#+0
   \   00000002   0x6801             LDR      R1,[R0, #+0]
   \   00000004   0xBF12             ITEE     NE 
   \   00000006   0xF041 0x0101      ORRNE    R1,R1,#0x1
   \   0000000A   0x0849             LSREQ    R1,R1,#+1
   \   0000000C   0x0049             LSLEQ    R1,R1,#+1
    278            {
    279              /* Enable the selected DMAy Channelx */
    280              DMAy_Channelx->CCR |= CCR_ENABLE_Set;
    281            }
    282            else
    283            {
    284              /* Disable the selected DMAy Channelx */
    285              DMAy_Channelx->CCR &= CCR_ENABLE_Reset;
   \   0000000E   0x6001             STR      R1,[R0, #+0]
    286            }
    287          }
   \   00000010   0x4770             BX       LR               ;; return
    288          
    289          /*******************************************************************************
    290          * Function Name  : DMA_ITConfig
    291          * Description    : Enables or disables the specified DMAy Channelx interrupts.
    292          * Input          : - DMAy_Channelx: where y can be 1 or 2 to select the DMA and 
    293          *                    x can be 1 to 7 for DMA1 and 1 to 5 for DMA2 to select the 
    294          *                    DMA Channel.
    295          *                  - DMA_IT: specifies the DMA interrupts sources to be enabled
    296          *                    or disabled. 
    297          *                    This parameter can be any combination of the following values:
    298          *                       - DMA_IT_TC:  Transfer complete interrupt mask
    299          *                       - DMA_IT_HT:  Half transfer interrupt mask
    300          *                       - DMA_IT_TE:  Transfer error interrupt mask
    301          *                  - NewState: new state of the specified DMA interrupts.
    302          *                    This parameter can be: ENABLE or DISABLE.
    303          * Output         : None
    304          * Return         : None
    305          *******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    306          void DMA_ITConfig(DMA_Channel_TypeDef* DMAy_Channelx, u32 DMA_IT, FunctionalState NewState)
    307          {
    308            /* Check the parameters */
    309            assert_param(IS_DMA_ALL_PERIPH(DMAy_Channelx));
    310            assert_param(IS_DMA_CONFIG_IT(DMA_IT));
    311            assert_param(IS_FUNCTIONAL_STATE(NewState));
    312          
    313            if (NewState != DISABLE)
   \                     DMA_ITConfig:
   \   00000000   0x2A00             CMP      R2,#+0
   \   00000002   0x6802             LDR      R2,[R0, #+0]
   \   00000004   0xBF14             ITE      NE 
   \   00000006   0x4311             ORRNE    R1,R1,R2
   \   00000008   0xEA22 0x0101      BICEQ    R1,R2,R1
    314            {
    315              /* Enable the selected DMA interrupts */
    316              DMAy_Channelx->CCR |= DMA_IT;
    317            }
    318            else
    319            {
    320              /* Disable the selected DMA interrupts */
    321              DMAy_Channelx->CCR &= ~DMA_IT;
   \   0000000C   0x6001             STR      R1,[R0, #+0]
    322            }
    323          }
   \   0000000E   0x4770             BX       LR               ;; return
    324          
    325          /*******************************************************************************
    326          * Function Name  : DMA_GetCurrDataCounter
    327          * Description    : Returns the number of remaining data units in the current
    328          *                  DMAy Channelx transfer.
    329          * Input          : - DMAy_Channelx: where y can be 1 or 2 to select the DMA and 
    330          *                    x can be 1 to 7 for DMA1 and 1 to 5 for DMA2 to select the 
    331          *                    DMA Channel.
    332          * Output         : None
    333          * Return         : The number of remaining data units in the current DMAy Channelx
    334          *                  transfer.
    335          *******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    336          u16 DMA_GetCurrDataCounter(DMA_Channel_TypeDef* DMAy_Channelx)
    337          {
    338            /* Check the parameters */
    339            assert_param(IS_DMA_ALL_PERIPH(DMAy_Channelx));
    340          
    341            /* Return the number of remaining data units for DMAy Channelx */
    342            return ((u16)(DMAy_Channelx->CNDTR));
   \                     DMA_GetCurrDataCounter:
   \   00000000   0x6840             LDR      R0,[R0, #+4]
   \   00000002   0xB280             UXTH     R0,R0
   \   00000004   0x4770             BX       LR               ;; return
    343          }
    344          
    345          /*******************************************************************************
    346          * Function Name  : DMA_GetFlagStatus
    347          * Description    : Checks whether the specified DMAy Channelx flag is set or not.
    348          * Input          : - DMA_FLAG: specifies the flag to check.
    349          *                    This parameter can be one of the following values:
    350          *                       - DMA1_FLAG_GL1: DMA1 Channel1 global flag.
    351          *                       - DMA1_FLAG_TC1: DMA1 Channel1 transfer complete flag.
    352          *                       - DMA1_FLAG_HT1: DMA1 Channel1 half transfer flag.
    353          *                       - DMA1_FLAG_TE1: DMA1 Channel1 transfer error flag.
    354          *                       - DMA1_FLAG_GL2: DMA1 Channel2 global flag.
    355          *                       - DMA1_FLAG_TC2: DMA1 Channel2 transfer complete flag.
    356          *                       - DMA1_FLAG_HT2: DMA1 Channel2 half transfer flag.
    357          *                       - DMA1_FLAG_TE2: DMA1 Channel2 transfer error flag.
    358          *                       - DMA1_FLAG_GL3: DMA1 Channel3 global flag.
    359          *                       - DMA1_FLAG_TC3: DMA1 Channel3 transfer complete flag.
    360          *                       - DMA1_FLAG_HT3: DMA1 Channel3 half transfer flag.
    361          *                       - DMA1_FLAG_TE3: DMA1 Channel3 transfer error flag.
    362          *                       - DMA1_FLAG_GL4: DMA1 Channel4 global flag.
    363          *                       - DMA1_FLAG_TC4: DMA1 Channel4 transfer complete flag.
    364          *                       - DMA1_FLAG_HT4: DMA1 Channel4 half transfer flag.
    365          *                       - DMA1_FLAG_TE4: DMA1 Channel4 transfer error flag.
    366          *                       - DMA1_FLAG_GL5: DMA1 Channel5 global flag.
    367          *                       - DMA1_FLAG_TC5: DMA1 Channel5 transfer complete flag.
    368          *                       - DMA1_FLAG_HT5: DMA1 Channel5 half transfer flag.
    369          *                       - DMA1_FLAG_TE5: DMA1 Channel5 transfer error flag.
    370          *                       - DMA1_FLAG_GL6: DMA1 Channel6 global flag.
    371          *                       - DMA1_FLAG_TC6: DMA1 Channel6 transfer complete flag.
    372          *                       - DMA1_FLAG_HT6: DMA1 Channel6 half transfer flag.
    373          *                       - DMA1_FLAG_TE6: DMA1 Channel6 transfer error flag.
    374          *                       - DMA1_FLAG_GL7: DMA1 Channel7 global flag.
    375          *                       - DMA1_FLAG_TC7: DMA1 Channel7 transfer complete flag.
    376          *                       - DMA1_FLAG_HT7: DMA1 Channel7 half transfer flag.
    377          *                       - DMA1_FLAG_TE7: DMA1 Channel7 transfer error flag.
    378          *                       - DMA2_FLAG_GL1: DMA2 Channel1 global flag.
    379          *                       - DMA2_FLAG_TC1: DMA2 Channel1 transfer complete flag.
    380          *                       - DMA2_FLAG_HT1: DMA2 Channel1 half transfer flag.
    381          *                       - DMA2_FLAG_TE1: DMA2 Channel1 transfer error flag.
    382          *                       - DMA2_FLAG_GL2: DMA2 Channel2 global flag.
    383          *                       - DMA2_FLAG_TC2: DMA2 Channel2 transfer complete flag.
    384          *                       - DMA2_FLAG_HT2: DMA2 Channel2 half transfer flag.
    385          *                       - DMA2_FLAG_TE2: DMA2 Channel2 transfer error flag.
    386          *                       - DMA2_FLAG_GL3: DMA2 Channel3 global flag.
    387          *                       - DMA2_FLAG_TC3: DMA2 Channel3 transfer complete flag.
    388          *                       - DMA2_FLAG_HT3: DMA2 Channel3 half transfer flag.
    389          *                       - DMA2_FLAG_TE3: DMA2 Channel3 transfer error flag.
    390          *                       - DMA2_FLAG_GL4: DMA2 Channel4 global flag.
    391          *                       - DMA2_FLAG_TC4: DMA2 Channel4 transfer complete flag.
    392          *                       - DMA2_FLAG_HT4: DMA2 Channel4 half transfer flag.
    393          *                       - DMA2_FLAG_TE4: DMA2 Channel4 transfer error flag.
    394          *                       - DMA2_FLAG_GL5: DMA2 Channel5 global flag.
    395          *                       - DMA2_FLAG_TC5: DMA2 Channel5 transfer complete flag.
    396          *                       - DMA2_FLAG_HT5: DMA2 Channel5 half transfer flag.
    397          *                       - DMA2_FLAG_TE5: DMA2 Channel5 transfer error flag.
    398          * Output         : None
    399          * Return         : The new state of DMA_FLAG (SET or RESET).
    400          *******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    401          FlagStatus DMA_GetFlagStatus(u32 DMA_FLAG)
    402          {
    403            FlagStatus bitstatus = RESET;
   \                     DMA_GetFlagStatus:
   \   00000000   0x2100             MOVS     R1,#+0
    404            u32 tmpreg = 0;
    405          
    406            /* Check the parameters */
    407            assert_param(IS_DMA_GET_FLAG(DMA_FLAG));
    408          
    409            /* Calculate the used DMA */
    410            if ((DMA_FLAG & FLAG_Mask) != (u32)RESET)
   \   00000002   0x00C2             LSLS     R2,R0,#+3
   \   00000004   0xBF4C             ITE      MI 
   \   00000006   0x....             LDRMI.N  R2,??DataTable4_3  ;; 0x40020400
   \   00000008   0x....             LDRPL.N  R2,??DataTable4_4  ;; 0x40020000
    411            {
    412              /* Get DMA2 ISR register value */
    413              tmpreg = DMA2->ISR ;
    414            }
    415            else
    416            {
    417              /* Get DMA1 ISR register value */
    418              tmpreg = DMA1->ISR ;
   \   0000000A   0x6812             LDR      R2,[R2, #+0]
    419            }
    420          
    421            /* Check the status of the specified DMA flag */
    422            if ((tmpreg & DMA_FLAG) != (u32)RESET)
   \   0000000C   0x4202             TST      R2,R0
   \   0000000E   0xBF18             IT       NE 
   \   00000010   0x2101             MOVNE    R1,#+1
    423            {
    424              /* DMA_FLAG is set */
    425              bitstatus = SET;
    426            }
    427            else
    428            {
    429              /* DMA_FLAG is reset */
    430              bitstatus = RESET;
    431            }
    432            
    433            /* Return the DMA_FLAG status */
    434            return  bitstatus;
   \   00000012   0x4608             MOV      R0,R1
   \   00000014   0x4770             BX       LR               ;; return
    435          }
    436          
    437          /*******************************************************************************
    438          * Function Name  : DMA_ClearFlag
    439          * Description    : Clears the DMAy Channelx's pending flags.
    440          * Input          : - DMA_FLAG: specifies the flag to clear.
    441          *                    This parameter can be any combination (for the same DMA) of 
    442          *                    the following values:
    443          *                       - DMA1_FLAG_GL1: DMA1 Channel1 global flag.
    444          *                       - DMA1_FLAG_TC1: DMA1 Channel1 transfer complete flag.
    445          *                       - DMA1_FLAG_HT1: DMA1 Channel1 half transfer flag.
    446          *                       - DMA1_FLAG_TE1: DMA1 Channel1 transfer error flag.
    447          *                       - DMA1_FLAG_GL2: DMA1 Channel2 global flag.
    448          *                       - DMA1_FLAG_TC2: DMA1 Channel2 transfer complete flag.
    449          *                       - DMA1_FLAG_HT2: DMA1 Channel2 half transfer flag.
    450          *                       - DMA1_FLAG_TE2: DMA1 Channel2 transfer error flag.
    451          *                       - DMA1_FLAG_GL3: DMA1 Channel3 global flag.
    452          *                       - DMA1_FLAG_TC3: DMA1 Channel3 transfer complete flag.
    453          *                       - DMA1_FLAG_HT3: DMA1 Channel3 half transfer flag.
    454          *                       - DMA1_FLAG_TE3: DMA1 Channel3 transfer error flag.
    455          *                       - DMA1_FLAG_GL4: DMA1 Channel4 global flag.
    456          *                       - DMA1_FLAG_TC4: DMA1 Channel4 transfer complete flag.
    457          *                       - DMA1_FLAG_HT4: DMA1 Channel4 half transfer flag.
    458          *                       - DMA1_FLAG_TE4: DMA1 Channel4 transfer error flag.
    459          *                       - DMA1_FLAG_GL5: DMA1 Channel5 global flag.
    460          *                       - DMA1_FLAG_TC5: DMA1 Channel5 transfer complete flag.
    461          *                       - DMA1_FLAG_HT5: DMA1 Channel5 half transfer flag.
    462          *                       - DMA1_FLAG_TE5: DMA1 Channel5 transfer error flag.
    463          *                       - DMA1_FLAG_GL6: DMA1 Channel6 global flag.
    464          *                       - DMA1_FLAG_TC6: DMA1 Channel6 transfer complete flag.
    465          *                       - DMA1_FLAG_HT6: DMA1 Channel6 half transfer flag.
    466          *                       - DMA1_FLAG_TE6: DMA1 Channel6 transfer error flag.
    467          *                       - DMA1_FLAG_GL7: DMA1 Channel7 global flag.
    468          *                       - DMA1_FLAG_TC7: DMA1 Channel7 transfer complete flag.
    469          *                       - DMA1_FLAG_HT7: DMA1 Channel7 half transfer flag.
    470          *                       - DMA1_FLAG_TE7: DMA1 Channel7 transfer error flag.
    471          *                       - DMA2_FLAG_GL1: DMA2 Channel1 global flag.
    472          *                       - DMA2_FLAG_TC1: DMA2 Channel1 transfer complete flag.
    473          *                       - DMA2_FLAG_HT1: DMA2 Channel1 half transfer flag.
    474          *                       - DMA2_FLAG_TE1: DMA2 Channel1 transfer error flag.
    475          *                       - DMA2_FLAG_GL2: DMA2 Channel2 global flag.
    476          *                       - DMA2_FLAG_TC2: DMA2 Channel2 transfer complete flag.
    477          *                       - DMA2_FLAG_HT2: DMA2 Channel2 half transfer flag.
    478          *                       - DMA2_FLAG_TE2: DMA2 Channel2 transfer error flag.
    479          *                       - DMA2_FLAG_GL3: DMA2 Channel3 global flag.
    480          *                       - DMA2_FLAG_TC3: DMA2 Channel3 transfer complete flag.
    481          *                       - DMA2_FLAG_HT3: DMA2 Channel3 half transfer flag.
    482          *                       - DMA2_FLAG_TE3: DMA2 Channel3 transfer error flag.
    483          *                       - DMA2_FLAG_GL4: DMA2 Channel4 global flag.
    484          *                       - DMA2_FLAG_TC4: DMA2 Channel4 transfer complete flag.
    485          *                       - DMA2_FLAG_HT4: DMA2 Channel4 half transfer flag.
    486          *                       - DMA2_FLAG_TE4: DMA2 Channel4 transfer error flag.
    487          *                       - DMA2_FLAG_GL5: DMA2 Channel5 global flag.
    488          *                       - DMA2_FLAG_TC5: DMA2 Channel5 transfer complete flag.
    489          *                       - DMA2_FLAG_HT5: DMA2 Channel5 half transfer flag.
    490          *                       - DMA2_FLAG_TE5: DMA2 Channel5 transfer error flag.
    491          * Output         : None
    492          * Return         : None
    493          *******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    494          void DMA_ClearFlag(u32 DMA_FLAG)
    495          {
    496            /* Check the parameters */
    497            assert_param(IS_DMA_CLEAR_FLAG(DMA_FLAG));
    498          
    499            /* Calculate the used DMA */
    500            if ((DMA_FLAG & FLAG_Mask) != (u32)RESET)
   \                     DMA_ClearFlag:
   \   00000000   0x00C1             LSLS     R1,R0,#+3
   \   00000002   0xBF4C             ITE      MI 
   \   00000004   0x....             LDRMI.N  R1,??DataTable4_2  ;; 0x40020404
   \   00000006   0x....             LDRPL.N  R1,??DataTable4_1  ;; 0x40020004
    501            {
    502              /* Clear the selected DMA flags */
    503              DMA2->IFCR = DMA_FLAG;
    504            }
    505            else
    506            {
    507              /* Clear the selected DMA flags */
    508              DMA1->IFCR = DMA_FLAG;
   \   00000008   0x6008             STR      R0,[R1, #+0]
    509            }
    510          }
   \   0000000A   0x4770             BX       LR               ;; return
    511          
    512          /*******************************************************************************
    513          * Function Name  : DMA_GetITStatus
    514          * Description    : Checks whether the specified DMAy Channelx interrupt has 
    515          *                  occurred or not.
    516          * Input          : - DMA_IT: specifies the DMA interrupt source to check. 
    517          *                    This parameter can be one of the following values:
    518          *                       - DMA1_IT_GL1: DMA1 Channel1 global interrupt.
    519          *                       - DMA1_IT_TC1: DMA1 Channel1 transfer complete interrupt.
    520          *                       - DMA1_IT_HT1: DMA1 Channel1 half transfer interrupt.
    521          *                       - DMA1_IT_TE1: DMA1 Channel1 transfer error interrupt.
    522          *                       - DMA1_IT_GL2: DMA1 Channel2 global interrupt.
    523          *                       - DMA1_IT_TC2: DMA1 Channel2 transfer complete interrupt.
    524          *                       - DMA1_IT_HT2: DMA1 Channel2 half transfer interrupt.
    525          *                       - DMA1_IT_TE2: DMA1 Channel2 transfer error interrupt.
    526          *                       - DMA1_IT_GL3: DMA1 Channel3 global interrupt.
    527          *                       - DMA1_IT_TC3: DMA1 Channel3 transfer complete interrupt.
    528          *                       - DMA1_IT_HT3: DMA1 Channel3 half transfer interrupt.
    529          *                       - DMA1_IT_TE3: DMA1 Channel3 transfer error interrupt.
    530          *                       - DMA1_IT_GL4: DMA1 Channel4 global interrupt.
    531          *                       - DMA1_IT_TC4: DMA1 Channel4 transfer complete interrupt.
    532          *                       - DMA1_IT_HT4: DMA1 Channel4 half transfer interrupt.
    533          *                       - DMA1_IT_TE4: DMA1 Channel4 transfer error interrupt.
    534          *                       - DMA1_IT_GL5: DMA1 Channel5 global interrupt.
    535          *                       - DMA1_IT_TC5: DMA1 Channel5 transfer complete interrupt.
    536          *                       - DMA1_IT_HT5: DMA1 Channel5 half transfer interrupt.
    537          *                       - DMA1_IT_TE5: DMA1 Channel5 transfer error interrupt.
    538          *                       - DMA1_IT_GL6: DMA1 Channel6 global interrupt.
    539          *                       - DMA1_IT_TC6: DMA1 Channel6 transfer complete interrupt.
    540          *                       - DMA1_IT_HT6: DMA1 Channel6 half transfer interrupt.
    541          *                       - DMA1_IT_TE6: DMA1 Channel6 transfer error interrupt.
    542          *                       - DMA1_IT_GL7: DMA1 Channel7 global interrupt.
    543          *                       - DMA1_IT_TC7: DMA1 Channel7 transfer complete interrupt.
    544          *                       - DMA1_IT_HT7: DMA1 Channel7 half transfer interrupt.
    545          *                       - DMA1_IT_TE7: DMA1 Channel7 transfer error interrupt.
    546          *                       - DMA2_IT_GL1: DMA2 Channel1 global interrupt.
    547          *                       - DMA2_IT_TC1: DMA2 Channel1 transfer complete interrupt.
    548          *                       - DMA2_IT_HT1: DMA2 Channel1 half transfer interrupt.
    549          *                       - DMA2_IT_TE1: DMA2 Channel1 transfer error interrupt.
    550          *                       - DMA2_IT_GL2: DMA2 Channel2 global interrupt.
    551          *                       - DMA2_IT_TC2: DMA2 Channel2 transfer complete interrupt.
    552          *                       - DMA2_IT_HT2: DMA2 Channel2 half transfer interrupt.
    553          *                       - DMA2_IT_TE2: DMA2 Channel2 transfer error interrupt.
    554          *                       - DMA2_IT_GL3: DMA2 Channel3 global interrupt.
    555          *                       - DMA2_IT_TC3: DMA2 Channel3 transfer complete interrupt.
    556          *                       - DMA2_IT_HT3: DMA2 Channel3 half transfer interrupt.
    557          *                       - DMA2_IT_TE3: DMA2 Channel3 transfer error interrupt.
    558          *                       - DMA2_IT_GL4: DMA2 Channel4 global interrupt.
    559          *                       - DMA2_IT_TC4: DMA2 Channel4 transfer complete interrupt.
    560          *                       - DMA2_IT_HT4: DMA2 Channel4 half transfer interrupt.
    561          *                       - DMA2_IT_TE4: DMA2 Channel4 transfer error interrupt.
    562          *                       - DMA2_IT_GL5: DMA2 Channel5 global interrupt.
    563          *                       - DMA2_IT_TC5: DMA2 Channel5 transfer complete interrupt.
    564          *                       - DMA2_IT_HT5: DMA2 Channel5 half transfer interrupt.
    565          *                       - DMA2_IT_TE5: DMA2 Channel5 transfer error interrupt.
    566          * Output         : None
    567          * Return         : The new state of DMA_IT (SET or RESET).
    568          *******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    569          ITStatus DMA_GetITStatus(u32 DMA_IT)
    570          {
    571            ITStatus bitstatus = RESET;
   \                     DMA_GetITStatus:
   \   00000000   0x2100             MOVS     R1,#+0
    572            u32 tmpreg = 0;
    573          
    574            /* Check the parameters */
    575            assert_param(IS_DMA_GET_IT(DMA_IT));
    576          
    577            /* Calculate the used DMA */
    578            if ((DMA_IT & FLAG_Mask) != (u32)RESET)
   \   00000002   0x00C2             LSLS     R2,R0,#+3
   \   00000004   0xBF4C             ITE      MI 
   \   00000006   0x....             LDRMI.N  R2,??DataTable4_3  ;; 0x40020400
   \   00000008   0x....             LDRPL.N  R2,??DataTable4_4  ;; 0x40020000
    579            {
    580              /* Get DMA2 ISR register value */
    581              tmpreg = DMA2->ISR ;
    582            }
    583            else
    584            {
    585              /* Get DMA1 ISR register value */
    586              tmpreg = DMA1->ISR ;
   \   0000000A   0x6812             LDR      R2,[R2, #+0]
    587            }
    588          
    589            /* Check the status of the specified DMA interrupt */
    590            if ((tmpreg & DMA_IT) != (u32)RESET)
   \   0000000C   0x4202             TST      R2,R0
   \   0000000E   0xBF18             IT       NE 
   \   00000010   0x2101             MOVNE    R1,#+1
    591            {
    592              /* DMA_IT is set */
    593              bitstatus = SET;
    594            }
    595            else
    596            {
    597              /* DMA_IT is reset */
    598              bitstatus = RESET;
    599            }
    600            /* Return the DMA_IT status */
    601            return  bitstatus;
   \   00000012   0x4608             MOV      R0,R1
   \   00000014   0x4770             BX       LR               ;; return
    602          }
    603          
    604          /*******************************************************************************
    605          * Function Name  : DMA_ClearITPendingBit
    606          * Description    : Clears the DMAy Channelxs interrupt pending bits.
    607          * Input          : - DMA_IT: specifies the DMA interrupt pending bit to clear.
    608          *                    This parameter can be any combination (for the same DMA) of
    609          *                    the following values:
    610          *                       - DMA1_IT_GL1: DMA1 Channel1 global interrupt.
    611          *                       - DMA1_IT_TC1: DMA1 Channel1 transfer complete interrupt.
    612          *                       - DMA1_IT_HT1: DMA1 Channel1 half transfer interrupt.
    613          *                       - DMA1_IT_TE1: DMA1 Channel1 transfer error interrupt.
    614          *                       - DMA1_IT_GL2: DMA1 Channel2 global interrupt.
    615          *                       - DMA1_IT_TC2: DMA1 Channel2 transfer complete interrupt.
    616          *                       - DMA1_IT_HT2: DMA1 Channel2 half transfer interrupt.
    617          *                       - DMA1_IT_TE2: DMA1 Channel2 transfer error interrupt.
    618          *                       - DMA1_IT_GL3: DMA1 Channel3 global interrupt.
    619          *                       - DMA1_IT_TC3: DMA1 Channel3 transfer complete interrupt.
    620          *                       - DMA1_IT_HT3: DMA1 Channel3 half transfer interrupt.
    621          *                       - DMA1_IT_TE3: DMA1 Channel3 transfer error interrupt.
    622          *                       - DMA1_IT_GL4: DMA1 Channel4 global interrupt.
    623          *                       - DMA1_IT_TC4: DMA1 Channel4 transfer complete interrupt.
    624          *                       - DMA1_IT_HT4: DMA1 Channel4 half transfer interrupt.
    625          *                       - DMA1_IT_TE4: DMA1 Channel4 transfer error interrupt.
    626          *                       - DMA1_IT_GL5: DMA1 Channel5 global interrupt.
    627          *                       - DMA1_IT_TC5: DMA1 Channel5 transfer complete interrupt.
    628          *                       - DMA1_IT_HT5: DMA1 Channel5 half transfer interrupt.
    629          *                       - DMA1_IT_TE5: DMA1 Channel5 transfer error interrupt.
    630          *                       - DMA1_IT_GL6: DMA1 Channel6 global interrupt.
    631          *                       - DMA1_IT_TC6: DMA1 Channel6 transfer complete interrupt.
    632          *                       - DMA1_IT_HT6: DMA1 Channel6 half transfer interrupt.
    633          *                       - DMA1_IT_TE6: DMA1 Channel6 transfer error interrupt.
    634          *                       - DMA1_IT_GL7: DMA1 Channel7 global interrupt.
    635          *                       - DMA1_IT_TC7: DMA1 Channel7 transfer complete interrupt.
    636          *                       - DMA1_IT_HT7: DMA1 Channel7 half transfer interrupt.
    637          *                       - DMA1_IT_TE7: DMA1 Channel7 transfer error interrupt.
    638          *                       - DMA2_IT_GL1: DMA2 Channel1 global interrupt.
    639          *                       - DMA2_IT_TC1: DMA2 Channel1 transfer complete interrupt.
    640          *                       - DMA2_IT_HT1: DMA2 Channel1 half transfer interrupt.
    641          *                       - DMA2_IT_TE1: DMA2 Channel1 transfer error interrupt.
    642          *                       - DMA2_IT_GL2: DMA2 Channel2 global interrupt.
    643          *                       - DMA2_IT_TC2: DMA2 Channel2 transfer complete interrupt.
    644          *                       - DMA2_IT_HT2: DMA2 Channel2 half transfer interrupt.
    645          *                       - DMA2_IT_TE2: DMA2 Channel2 transfer error interrupt.
    646          *                       - DMA2_IT_GL3: DMA2 Channel3 global interrupt.
    647          *                       - DMA2_IT_TC3: DMA2 Channel3 transfer complete interrupt.
    648          *                       - DMA2_IT_HT3: DMA2 Channel3 half transfer interrupt.
    649          *                       - DMA2_IT_TE3: DMA2 Channel3 transfer error interrupt.
    650          *                       - DMA2_IT_GL4: DMA2 Channel4 global interrupt.
    651          *                       - DMA2_IT_TC4: DMA2 Channel4 transfer complete interrupt.
    652          *                       - DMA2_IT_HT4: DMA2 Channel4 half transfer interrupt.
    653          *                       - DMA2_IT_TE4: DMA2 Channel4 transfer error interrupt.
    654          *                       - DMA2_IT_GL5: DMA2 Channel5 global interrupt.
    655          *                       - DMA2_IT_TC5: DMA2 Channel5 transfer complete interrupt.
    656          *                       - DMA2_IT_HT5: DMA2 Channel5 half transfer interrupt.
    657          *                       - DMA2_IT_TE5: DMA2 Channel5 transfer error interrupt.
    658          * Output         : None
    659          * Return         : None
    660          *******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    661          void DMA_ClearITPendingBit(u32 DMA_IT)
    662          {
    663            /* Check the parameters */
    664            assert_param(IS_DMA_CLEAR_IT(DMA_IT));
    665          
    666            /* Calculate the used DMA */
    667            if ((DMA_IT & FLAG_Mask) != (u32)RESET)
   \                     DMA_ClearITPendingBit:
   \   00000000   0x00C1             LSLS     R1,R0,#+3
   \   00000002   0xBF4C             ITE      MI 
   \   00000004   0x....             LDRMI.N  R1,??DataTable4_2  ;; 0x40020404
   \   00000006   0x....             LDRPL.N  R1,??DataTable4_1  ;; 0x40020004
    668            {
    669              /* Clear the selected DMA interrupt pending bits */
    670              DMA2->IFCR = DMA_IT;
    671            }
    672            else
    673            {
    674              /* Clear the selected DMA interrupt pending bits */
    675              DMA1->IFCR = DMA_IT;
   \   00000008   0x6008             STR      R0,[R1, #+0]
    676            }
    677          }
   \   0000000A   0x4770             BX       LR               ;; return

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4:
   \   00000000   0x40020008         DC32     0x40020008

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_1:
   \   00000000   0x40020004         DC32     0x40020004

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_2:
   \   00000000   0x40020404         DC32     0x40020404

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_3:
   \   00000000   0x40020400         DC32     0x40020400

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_4:
   \   00000000   0x40020000         DC32     0x40020000
    678          
    679          /******************* (C) COPYRIGHT 2008 STMicroelectronics *****END OF FILE****/
    680          

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
        0  DMA_ClearFlag
        0  DMA_ClearITPendingBit
        0  DMA_Cmd
        0  DMA_DeInit
        0  DMA_GetCurrDataCounter
        0  DMA_GetFlagStatus
        0  DMA_GetITStatus
        0  DMA_ITConfig
        0  DMA_Init
        0  DMA_StructInit


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable4
       4  ??DataTable4_1
       4  ??DataTable4_2
       4  ??DataTable4_3
       4  ??DataTable4_4
      12  DMA_ClearFlag
      12  DMA_ClearITPendingBit
      18  DMA_Cmd
     190  DMA_DeInit
       6  DMA_GetCurrDataCounter
      22  DMA_GetFlagStatus
      22  DMA_GetITStatus
      16  DMA_ITConfig
      54  DMA_Init
      26  DMA_StructInit

 
 398 bytes in section .text
 
 398 bytes of CODE memory

Errors: none
Warnings: none
